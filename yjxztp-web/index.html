<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>重大项目云协同专用软件</title>
  <link rel="stylesheet" href="./assets/plugins/layui/css/layui.css">
  <link rel="stylesheet" href="./assets/plugins/layui/layui_exts/dropDown/dropDown.css">
  <link rel="stylesheet" href="./assets/css/index/style.css">
</head>

<body class="index-body">
  <header class="index-header">
    <div class="index-header__left">
      <div class="index-logo">
        <img src="" alt="">重大项目云协同专用软件
      </div>
    </div>
    <div class="index-header__center">
      <div class="index-menus">
        <div data-href="./pages/home.html" class="index-menus-item index-menus-item--active">首页</div>
        <div data-href="./pages/project-management/index.html" class="index-menus-item">项目管理</div>
        <div data-href="./pages/task-cooperation/index.html" class="index-menus-item">任务协同</div>
        <div data-href="./pages/report-cooperation/index.html" class="index-menus-item">报告协作</div>
        <div data-href="./pages/file-library/index.html" class="index-menus-item">文件库</div>
        <div data-href="./pages/system-management/index.html" class="index-menus-item">系统管理</div>
      </div>
    </div>
    <div class="index-header__right">
      <div class="index-notice">
        <button class="layui-btn layui-btn-text">
          <i class="layui-icon layui-icon-notice"></i>
        </button>
        <span class="layui-badge">6</span>
      </div>
      <div class="divider--vertical">
      </div>
      <div class="index-user">
        <img class="index-user__avatar" src="https://dummyimage.com/64x64/000/fff" alt="avatar">
        <div class="index-user__name">周小豆</div>
      </div>
    </div>
  </header>
  <div id="noticeCon" style="display: none;">
    <div class="notice-toolbar">
      <div class="dropdown-box">
        <a class="notice-type layui-dropdown-link" data-dropdown="1" data-type="read-drop"><span>未读消息</span><i
            class="layui-icon layui-icon-down"></i></a>
        <a class="notice-type layui-dropdown-link" data-dropdown="2" data-type="category-drop"><span>类别</span><i
            class="layui-icon layui-icon-down"></i></a>
      </div>
      <a class="layui-btn layui-btn-sm layui-btn-text" id="allRead">全部已读</a>
    </div>
    <div class="notice-list-con">
      <ul>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-one">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              任务分配
            </div>
            <div class="notice-list-item_info">
              任务：编写报告
            </div>
            <div class="notice-list-item_info">
              内容：张三设置此任务为1.1.1审核的前置任务张三设置此任务为1.1.1审核的前置任务
            </div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-two">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              任务待办提醒
            </div>
            <div class="notice-list-item_info">任务：编写报告</div>
            <div class="notice-list-item_info">内容：张三设置此任务为1.1.1审核的前置任务</div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-three">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              评论通知
            </div>
            <div class="notice-list-item_info">任务：编写报告</div>
            <div class="notice-list-item_info">内容：张三设置此任务为1.1.1审核的前置任务</div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-four">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              讨论通知
            </div>
            <div class="notice-list-item_info">任务：编写报告</div>
            <div class="notice-list-item_info">内容：张三设置此任务为1.1.1审核的前置任务</div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-five">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              文件分享通知
            </div>
            <div class="notice-list-item_info">任务：编写报告</div>
            <div class="notice-list-item_info">内容：张三设置此任务为1.1.1审核的前置任务</div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-five">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              文件分享通知
            </div>
            <div class="notice-list-item_info">任务：编写报告</div>
            <div class="notice-list-item_info">内容：张三设置此任务为1.1.1审核的前置任务</div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-five">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              文件分享通知
            </div>
            <div class="notice-list-item_info">任务：编写报告</div>
            <div class="notice-list-item_info">内容：张三设置此任务为1.1.1审核的前置任务</div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-five">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              文件分享通知
            </div>
            <div class="notice-list-item_info">任务：编写报告</div>
            <div class="notice-list-item_info">内容：张三设置此任务为1.1.1审核的前置任务</div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
        <li>
          <div class="notice-list-item_left">
            <div class="notice-list-item_icon type-five">
              <i class="layui-icon layui-icon-rate-solid"></i>
            </div>
          </div>
          <div class="notice-list-item_right">
            <div class="notice-list-item_type">
              文件分享通知
            </div>
            <div class="notice-list-item_info">任务：编写报告</div>
            <div class="notice-list-item_info">内容：张三设置此任务为1.1.1审核的前置任务</div>
            <div class="notice-list-item_date">
              2020-05-21 14:27:49
            </div>
          </div>
          <span class="notice-list-item_dot"></span>
          <span class="notice-list-item_tips">已读</span>
        </li>
      </ul>
    </div>
  </div>
  <iframe id="homeSubPage" src="./pages/home.html" frameborder="0"></iframe>

  <script src="./assets/js/jquery-1.9.1.min.js"></script>
  <script src="./assets/plugins/layui/layui.js"></script>
  <script src="./assets/js/index/main.js"></script>
  <script>
    layui.config({
  base: "./assets/plugins/layui/layui_exts/dropDown/"
}).use(["element", "layer", "dropDown"], function () {
  var element = layui.element,
    layer = layui.layer,
    dropDown = layui.dropDown;

  $(".index-notice").on("click", function () {
    var noticeEle = $("#noticeCon")
    layer.open({
      title: '全部通知',
      type: 1,
      anim: -1,
      shadeClose: true,
      offset: 'r',
      shade: 0.001,
      shadeClose: true,
      skin: 'notice-layer layui-anim layui-anim-rl layui-layer-openRight',
      area: '440px',
      zIndex: '99',
      content: noticeEle,
      success: function (layero) {
        layer.setTop(layero);
      }
    });
  });

  // 信息类型切换
  $(".notice-type").on("click", function () {
    var $this = $(this),
      dataType = $this.attr("data-type"),
      dropdownData;
    if (dataType == "read-drop") {
      dropdownData = [{
          'type': 1,
          'title': '已读消息'
        },
        {
          'type': 2,
          'title': '未读消息'
        },
      ]
    } else {
      dropdownData = [{
          'type': 1,
          'title': '类型一'
        },
        {
          'type': 2,
          'title': '类型二'
        },
      ]
    };

    var dropDownEle = dropDown.render({
      ele: $this, // 绑定下拉菜单的元素 （jq对象）
      position: 'bottom', // 下拉菜单定位 默认 bottom 类型：top、left、right、bottom
      className: 'notice-drop', //自定义class 可根据此class自定义样式 默认为 空
      zIndex: 1999, // 下拉层级 默认值999
      data: dropdownData, // 下拉菜单的数据
      choose: function (data) { // 点击回调
        $this.children('span').text(data.title)
      }
    });
  });

  var indexWin;
  // 模拟弹出
  setTimeout(function () {
    indexWin = layer.open({
      title: '讨论通知',
      type: 1,
      anim: -1,
      shade: 0,
      shadeClose: true,
      offset: 'rb',
      skin: 'indexWin-layer',
      area: '320px',
      btn: '参与讨论',
      content: "您好，王文静在测试文档报告中发起了讨论，邀 请您参与！",
      success: function (layero) {
        layer.setTop(layero);
      }
    });
  }, 1000);
  setTimeout(function () {
    layer.close(indexWin);
  }, 4000)
});

$("[data-href]").on("click", function () {
  var url = $(this).data("href");
  if (!url) return;
  $("[data-href]").removeClass("index-menus-item--active");
  $(this).addClass("index-menus-item--active");
  $("#homeSubPage").attr("src", url);
});

function setPageUrl(url) {
  if (!url) return;
  $("#homeSubPage").attr("src", url);
}
  </script>
</body>


</html>
